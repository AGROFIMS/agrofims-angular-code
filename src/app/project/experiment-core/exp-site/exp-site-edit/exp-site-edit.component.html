<mat-card-header>
  <mat-card-title>
    Experiments description
  </mat-card-title>
</mat-card-header>

<mat-nav-list>
  <ol>
    <li class="home"><a routerLink="/">Home</a></li>
    <li class="inactive"><a routerLink="/experiments">Experiments</a></li>
    <li class="inactive"><a routerLink="/experiments/manage/{{expId}}">Manage experiment: <b>{{expId}}</b>
      </a> </li>
    <li class="active">Experiment site: <b>
        <mat-label>{{expSiteNameId}}</mat-label>
      </b>
    </li>
  </ol>
</mat-nav-list>

<div fxLayout="row">
  <div fxFlex.gt-sm="100%">
    <mat-card>
      <mat-card-content>
        <mat-tab-group mat-align-tabs="start">



          <!-- tab site -->
          <mat-tab label="Site">
            <form class="form">

              <mat-card-title>Site information</mat-card-title>

              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Choose country name</mat-label>
                  <mat-select name="countryName" [formControl]="countryName" (selectionChange)="getSiteII()">
                    <mat-option *ngFor="let siteI of siteIList" [value]="siteI">{{ siteI}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Choose name</mat-label>
                  <mat-select name="name" [(ngModel)]="expSite.siteId" (selectionChange)="put()">
                    <mat-option *ngFor="let siteII of siteIIList" [value]="siteII.siteId">{{ siteII.name}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <mat-card-title>Site description</mat-card-title>

              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Higher-level landform</mat-label>
                  <mat-select name="inHighLevelId" [(ngModel)]="expSite.inHighLevelId" (selectionChange)="put()">
                    <mat-option *ngFor="let par of parameterI" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" *ngIf="expSite.inHighLevelId == '174'" appearance="outline">
                  <mat-label>Other</mat-label>
                  <input matInput name="inHighLevelOther" [(ngModel)]="expSite.inHighLevelOther"
                    (ngModelChange)="put()">
                </mat-form-field>
              </div>

              <!-- 
                <mat-form-field *ngIf="this.itemsSelected.includes('Other')" appearance="outline">
                  <mat-label>Other</mat-label>
                  <mat-chip-list #chipList aria-label="Fruit selection">
                    <mat-chip *ngFor="let itemOther of itemsOtherSelected" [selectable]="selectable"
                      [removable]="removable" (removed)="remove(itemOther)">
                      {{itemOther}}
                      <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                    </mat-chip>
                    <input [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                      [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
                  </mat-chip-list>
                </mat-form-field>
              -->

              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Vegetation surrounding the experiment site</mat-label>
                  <mat-select name="inSiteVegetationMulti" [(ngModel)]="itemsSelected"
                    (ngModelChange)="inSiteVegetationClear()" multiple>
                    <!-- <mat-option *ngFor="let par of parameterII" [value]="par.name">
                      {{ par.name }}
                    </mat-option> -->
                    <mat-option *ngFor="let item of items" [value]="item">{{item}}</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

              <div fxLayout="row">
                <mat-form-field class="p-r-10" *ngIf="this.itemsSelected.includes('Other')" fxFlex="50"
                  appearance="outline">
                  <mat-label>Other</mat-label>
                  <mat-chip-list #chipList aria-label="Fruit selection">
                    <mat-chip *ngFor="let itemOther of itemsOtherSelected" [selectable]="selectable"
                      [removable]="removable" (removed)="remove(itemOther)">
                      {{itemOther}}
                      <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                    </mat-chip>
                    <input [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                      [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)">
                  </mat-chip-list>
                </mat-form-field>
              </div>


              <div fxLayout="row">
                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Site description notes</mat-label>
                  <textarea matInput name="inSiteDescNotes" [(ngModel)]="expSite.inSiteDescNotes" placeholder="Enter..."
                    (ngModelChange)="put()">
                  </textarea>
                </mat-form-field>
              </div>


              <mat-card-title>Soil classification</mat-card-title>

              <div fxLayout="row">

                <mat-form-field class="p-r-10" fxFlex="50" appearance="outline">
                  <mat-label>Soil classification system</mat-label>
                  <mat-select name="soilClassSystemId" [(ngModel)]="expSite.soilClassSystemId"
                    (selectionChange)="put()">
                    <mat-option *ngFor="let par of parameterIII" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field class="p-l-10" *ngIf="this.expSite.soilClassSystemId=='182'" fxFlex="50"
                  appearance="outline">
                  <mat-label>Soil group</mat-label>
                  <mat-select name="soilClassGroupId" [(ngModel)]="expSite.soilClassGroupId" (selectionChange)="put()">
                    <mat-option *ngFor="let par of parameterIV" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field class="p-l-10" *ngIf="this.expSite.soilClassSystemId=='183'" fxFlex="50"
                  appearance="outline">
                  <mat-label>Soil group</mat-label>
                  <mat-select name="soilClassGroupId" [(ngModel)]="expSite.soilClassGroupId" (selectionChange)="put()">
                    <mat-option *ngFor="let par of parameterV" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>

                <mat-form-field class="p-l-10" *ngIf="this.expSite.soilClassSystemId=='184'" fxFlex="50"
                  appearance="outline">
                  <mat-label>Soil group</mat-label>
                  <input matInput name="soilClassSystemOther" [(ngModel)]="expSite.soilClassSystemOther"
                    (ngModelChange)="put()">
                </mat-form-field>


              </div>

            </form>
          </mat-tab>



          <!-- tab crop -->
          <mat-tab label="Crop">
            <form class="form">
              <mat-card-title>Fieldbook details</mat-card-title>

              <div fxLayout="row">
                <mat-form-field fxFlex="50" appearance="outline">
                  <mat-label>Fieldbook ID</mat-label>
                  <input matInput name="fieldbookId" [(ngModel)]="expSite.fieldbookId" (ngModelChange)="put()">
                </mat-form-field>
              </div>

              <!-- <div fxLayout="row">
                <mat-form-field fxFlex="50" appearance="outline">
                  <mat-label>Cropping system</mat-label>
                  <mat-select name="croppingTypeId" [(ngModel)]="expSite.croppingTypeId"
                    (selectionChange)="selectCondition()">
                    <mat-option *ngFor="let par of parameterV" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div> -->

              <app-site-crop-list [expSite]="expSite" [expSiteId]="expSite.expSiteId.toString()"
                (eventEmitterSiteCropList)="catchEmitterSiteCropList($event)">
              </app-site-crop-list>
              <mat-card-title>Intercrop details</mat-card-title>

              <div fxLayout="row">
                <mat-form-field fxFlex="50" appearance="outline">
                  <mat-label>Intercrop arrangement</mat-label>
                  <mat-select name="intercropArrangementId" [(ngModel)]="expSite.intercropArrangementId"
                    (selectionChange)="put()">
                    <mat-option *ngFor="let par of parameterVI" [value]="par.parameterId">
                      {{ par.name }}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </div>

            </form>
          </mat-tab>

          <!-- tab design -->
          <!-- <mat-tab label="Design">
            <h3>Under construction</h3>
          </mat-tab>
          <mat-tab label="M. practices">
            <h3>Under construction</h3>
          </mat-tab> -->
          <mat-tab label="C. measurement">
            <app-measurement-list [childMessage]="itemList">
            </app-measurement-list>
          </mat-tab>
          <mat-tab label="C. Phenology">
            <h3>Under construction</h3>
          </mat-tab>
          <mat-tab label="Weather">
            <h3>Under construction</h3>
          </mat-tab>
          <mat-tab label="Soil">
            <h3>Under construction</h3>
          </mat-tab>
        </mat-tab-group>

      </mat-card-content>
    </mat-card>
  </div>
</div>